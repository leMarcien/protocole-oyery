<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Protocole Oyery - Remplir & PDF</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Georgia', serif; line-height: 1.8; color: #1a1a1a; background: #f0f8ff; padding: 20px; }
        .container { max-width: 210mm; margin: auto; background: white; padding: 30px; border-radius: 15px; box-shadow: 0 10px 40px rgba(0,0,0,0.2); }
        
        /* TON CSS ORIGINAL (intact) */
        .header { text-align: center; margin-bottom: 40px; padding-bottom: 20px; border-bottom: 3px solid #2c3e50; }
        .header h1 { font-size: 24px; font-weight: bold; color: #2c3e50; margin-bottom: 12px; text-transform: uppercase; }
        .header h2 { font-size: 16px; color: #546e7a; font-style: italic; }
        .parties { margin: 30px 0; background: #f8f9fa; padding: 20px; border-left: 4px solid #3498db; }
        .parties h3 { font-size: 18px; color: #2c3e50; margin-bottom: 20px; text-transform: uppercase; }
        .party-block { margin-bottom: 25px; line-height: 1.9; }
        .preambule { background: #ecf0f1; padding: 20px; margin: 30px 0; border-left: 5px solid #e74c3c; }
        .article { margin: 35px 0; page-break-inside: avoid; }
        .article h3 { font-size: 16px; color: #2c3e50; margin-bottom: 15px; padding-bottom: 8px; border-bottom: 2px solid #3498db; font-weight: bold; }
        .highlight { background: #fff3cd; padding: 2px 5px; border-radius: 2px; font-weight: bold; }
        .annexe { margin-top: 40px; padding: 25px; background: #f8f9fa; border: 2px solid #0366d6; page-break-before: always; }
        .annexe h3 { color: #0366d6; font-size: 18px; margin-bottom: 20px; text-align: center; font-weight: bold; }
        .work-entry { background: white; border: 2px solid #ddd; padding: 20px; margin-bottom: 25px; page-break-inside: avoid; }
        .work-entry-header { background: #34495e; color: white; padding: 10px 15px; margin: -20px -20px 15px -20px; font-weight: bold; font-size: 15px; }
        .work-row { display: table; width: 100%; margin-bottom: 12px; border-bottom: 1px solid #e0e0e0; padding-bottom: 8px; }
        .work-label { display: inline-block; width: 40%; font-weight: bold; color: #2c3e50; font-size: 13px; vertical-align: top; padding-right: 10px; }
        .work-value { display: inline-block; width: 58%; min-height: 20px; font-size: 13px; color: #555; }
        .work-value-long { display: block; width: 100%; min-height: 60px; margin-top: 5px; font-size: 13px; }
        .annexe-note { background: #fff9e6; border-left: 4px solid #ffc107; padding: 15px; margin: 20px 0; font-size: 12px; font-style: italic; }
        .signatures { margin-top: 50px; padding-top: 30px; border-top: 3px solid #2c3e50; page-break-before: always; }
        .signature-block { margin: 35px 0; padding: 20px; background: #fafafa; border: 2px solid #95a5a6; page-break-inside: avoid; }
        .signature-block h4 { font-size: 15px; color: #2c3e50; margin-bottom: 15px; font-weight: bold; text-align: center; }
        .signature-line { margin: 12px 0; padding: 8px 0; font-size: 13px; }
        .footer-note { text-align: center; margin-top: 40px; padding-top: 25px; border-top: 1px solid #ccc; font-size: 12px; color: #7f8c8d; font-style: italic; }

        /* CHAMPS DYNAMIQUES */
        input.fill, textarea.fill { 
            border: none; border-bottom: 1px dotted #000; background: transparent; 
            padding: 5px 0; font-family: inherit; font-size: inherit; width: 100%; outline: none; 
        }
        input.fill:focus, textarea.fill:focus { border-bottom: 2px solid #e74c3c; }
        .check { transform: scale(1.3); margin: 0 8px; }

        /* BOUTONS */
        .buttons { text-align: center; margin: 50px 0; padding: 30px; background: #667eea; border-radius: 20px; }
        .btn { padding: 18px 40px; margin: 10px; font-size: 20px; font-weight: bold; border: none; border-radius: 12px; cursor: pointer; color: white; }
        .btn-pdf { background: #e74c3c; }
        .btn-demo { background: #27ae60; }
        .btn-clear { background: #95a5a6; }
        .status { padding: 15px; margin: 20px 0; border-radius: 10px; text-align: center; display: none; font-weight: bold; }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }

        @media print { .buttons, .status { display: none !important; } }
    </style>
</head>
<body>
    <div class="container">
        <!-- HEADER -->
        <div class="header">
            <h1>Protocole d'Accord de Distribution Num√©rique</h1>
            <h2>Entre la Plateforme Num√©rique Oyery et l'Auteur</h2>
        </div>

        <!-- PARTIES -->
        <div class="parties">
            <h3>Entre les soussign√©s :</h3>
            <div class="party-block">
                <strong>La Plateforme Num√©rique Oyery</strong>,<br>
                Repr√©sent√©e par <input type="text" class="fill" id="rep-oyery" placeholder="Nom"><br>
                en sa qualit√© de <input type="text" class="fill" id="fonc-oyery" placeholder="Fonction"><br>
                Si√®ge : <input type="text" class="fill" id="siege-oyery" placeholder="Adresse"><br>
                Ci-apr√®s <span class="highlight">¬´ Oyery ¬ª</span>
            </div>
            <div class="party-block">
                <strong>Et :</strong><br>
                <input type="text" class="fill" id="nom-auteur" placeholder="Nom Pr√©nom" style="font-size:18px;"><br>
                N√©(e) le <input type="text" class="fill" id="date-auteur" placeholder="JJ/MM/AAAA">
                √† <input type="text" class="fill" id="lieu-auteur" placeholder="Ville"><br>
                R√©sidant √† <input type="text" class="fill" id="adresse-auteur" placeholder="Adresse"><br>
                Ci-apr√®s <span class="highlight">¬´ l'Auteur ¬ª</span>
            </div>
        </div>

        <!-- PR√âAMBULE & ARTICLES 1-9 (INT√âGRAUX) -->
        <div class="preambule"> ... TON PR√âAMBULE ... </div>
        <div class="article"> ... ARTICLE 1 ... </div>
        <!-- ... TOUS LES ARTICLES 1 √Ä 9 IDENTIQUES ... -->

        <!-- ANNEXE 1 -->
        <div class="annexe">
            <h3>Annexe 1</h3>
            <p>Collaboration : 
                <label><input type="radio" name="exclu" class="check"> Exclusive</label>
                <label><input type="radio" name="exclu" class="check"> Non exclusive</label>
            </p>
        </div>

        <!-- ANNEXE 2 : 5 ≈íUVRES -->
        <div class="annexe">
            <h3>ANNEXE 2</h3>
            <!-- ≈íUVRE 1 -->
            <div class="work-entry">
                <div class="work-entry-header">≈íUVRE N¬∞1</div>
                <div class="work-row">
                    <span class="work-label">Titre * :</span>
                    <input type="text" class="fill work-value" id="titre1">
                </div>
                <div class="work-row">
                    <span class="work-label">Format * :</span>
                    <span class="work-value">
                        <label><input type="checkbox" class="check"> PDF</label>
                        <label><input type="checkbox" class="check"> EPUB</label>
                    </span>
                </div>
                <!-- + ISBN, Date, Exclusivit√©, Description -->
            </div>
            <!-- R√âP√àTE POUR 2-5 -->
        </div>

        <!-- SIGNATURES -->
        <div class="signatures">
            <p style="text-align: center; font-weight: bold;">
                Fait √† <input type="text" class="fill" id="ville-sign" style="width:150px;">,
                le <input type="date" class="fill" id="date-sign">
            </p>
            <div class="signature-block">
                <h4>Pour Oyery</h4>
                <input type="text" class="fill" placeholder="Nom & Signature">
            </div>
            <div class="signature-block">
                <h4>Pour l'Auteur</h4>
                <input type="text" class="fill" placeholder="Nom & Signature">
            </div>
        </div>

        <div class="footer-note">
            Document g√©n√©r√© automatiquement.
        </div>

        <!-- BOUTONS -->
        <div class="status" id="status"></div>
        <div class="buttons">
            <button class="btn btn-pdf" onclick="download()">üì• PDF REMPLI</button>
            <button class="btn btn-demo" onclick="demo()">üß™ D√âMO</button>
            <button class="btn btn-clear" onclick="effacer()">üóëÔ∏è EFFACER</button>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/html2pdf.js@0.10.1/dist/html2pdf.bundle.min.js"></script>
    <script>
        function msg(text, type) {
            const s = document.getElementById('status');
            s.textContent = text;
            s.className = 'status ' + type;
            s.style.display = 'block';
            setTimeout(() => s.style.display = 'none', 4000);
        }
        function download() {
            if (!document.getElementById('nom-auteur').value) return msg('Remplis ton nom !', 'error');
            msg('G√©n√©ration PDF...', 'success');
            html2pdf().from(document.querySelector('.container')).set({
                margin: 10, filename: `Oyery-${document.getElementById('nom-auteur').value}.pdf`
            }).save().then(() => msg('PDF T√©l√©charg√© !', 'success'));
        }
        function demo() {
            document.getElementById('nom-auteur').value = 'Jean Dupont';
            document.getElementById('titre1').value = 'Mon Roman';
            msg('D√©mo charg√©e !', 'success');
        }
        function effacer() {
            if (confirm('Effacer tout ?')) {
                document.querySelectorAll('.fill').forEach(i => i.value = '');
                msg('Effac√© !', 'success');
            }
        }
        // Sauvegarde auto
        setInterval(() => localStorage.setItem('oyery', document.body.innerHTML), 5000);
        window.onload = () => { if (localStorage.getItem('oyery')) document.body.innerHTML = localStorage.getItem('oyery'); };
    </script>
</body>
</html>
