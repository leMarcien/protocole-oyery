<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Protocole Oyery - Remplir & Télécharger</title>
    <script src="https://cdn.jsdelivr.net/npm/html2pdf.js@0.10.1/dist/html2pdf.bundle.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Georgia', serif;
            line-height: 1.8;
            color: #1a1a1a;
            background: #f9f9f9;
            padding: 20px;
        }
        .container {
            max-width: 210mm;
            margin: 0 auto;
            background: white;
            padding: 25mm;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }
        input, textarea, select {
            width: 100%;
            padding: 8px;
            margin: 5px 0 15px;
            border: 1px dotted #333;
            font-family: inherit;
            font-size: 14px;
        }
        .highlight { background: #fff3cd; padding: 2px 5px; font-weight: bold; }
        .signature-line { border-bottom: 2px solid #333; display: inline-block; width: 300px; }
        .work-entry { border: 2px solid #ddd; padding: 20px; margin: 20px 0; background: #f8f9fa; }
        .btn-download {
            background: #27ae60; color: white; padding: 18px 40px; font-size: 20px;
            border: none; border-radius: 12px; cursor: pointer; font-weight: bold;
            box-shadow: 0 6px 15px rgba(0,0,0,0.3); margin: 40px auto; display: block;
        }
        .btn-download:hover { background: #219653; }
        h1, h2, h3, h4 { color: #2c3e50; }
        .checkbox-group { display: flex; gap: 20px; margin: 10px 0; }
        .checkbox-group label { display: flex; align-items: center; gap: 8px; }
        .page-break { page-break-before: always; }
    </style>
</head>
<body>

<div class="container" id="contract">
    <div class="header" style="text-align:center; margin-bottom:40px; border-bottom:3px solid #2c3e50; padding-bottom:20px;">
        <h1>PROTOCOLE D'ACCORD OYERY</h1>
        <h2>Distribution Numérique - Formulaire Remplissable</h2>
    </div>

    <!-- PARTIES -->
    <div style="background:#f0f8ff; padding:20px; border-left:5px solid #3498db; margin:30px 0;">
        <h3>ENTRE LES SOUSSIGNÉS :</h3><br>

        <strong>La Plateforme Oyery</strong><br>
        Représentée par : <input type="text" placeholder="Nom du représentant" id="repName"><br>
        En qualité de : <input type="text" placeholder="Fonction" id="repRole"><br>
        Siège social : <input type="text" placeholder="Adresse complète" id="oyeryAddress"><br><br>

        <strong>ET</strong><br><br>
        Nom de l'Auteur : <input type="text" placeholder="Nom complet" id="authorName"><br>
        Né(e) le : <input type="date" id="authorBirth"><br>
        Résidant à : <input type="text" placeholder="Adresse complète" id="authorAddress"><br>
        Email : <input type="email" placeholder="email@exemple.com" id="authorEmail"><br>
        Téléphone : <input type="tel" placeholder="+241 ..." id="authorPhone">
    </div>

    <!-- ANNEXE 1 : EXCLUSIVITÉ -->
    <div style="background:#e8f5e9; padding:20px; border-left:5px solid #4caf50; margin:30px 0;">
        <h3>ANNEXE 1 : Nature de la collaboration</h3>
        <div class="checkbox-group">
            <label><input type="radio" name="exclusivity" value="exclusive"> Exclusive</label>
            <label><input type="radio" name="exclusivity" value="non-exclusive" checked> Non exclusive</label>
        </div>
        <p>Exceptions (titres) : <input type="text" placeholder="ex: Mon Livre 1" style="width:100%;"></p>
    </div>

    <!-- ANNEXE 2 : LISTE DES ŒUVRES -->
    <h3 style="margin:30px 0 20px; color:#e74c3c;">ANNEXE 2 : MES ŒUVRES</h3>
    <div id="works-container">
        <!-- Œuvre 1 -->
        <div class="work-entry">
            <h4>ŒUVRE N°1</h4>
            <label>Titre * :</label> <input type="text" placeholder="Mon Super Livre"><br>
            <label>ISBN :</label> <input type="text" placeholder="978-..."><br>
            <label>Date de création * :</label> <input type="date"><br>
            <label>Format * :</label>
            <div class="checkbox-group">
                <label><input type="checkbox"> PDF</label>
                <label><input type="checkbox"> EPUB</label>
                <label><input type="checkbox"> MOBI</label>
            </div>
            <label>Exclusivité :</label>
            <div class="checkbox-group">
                <label><input type="radio" name="exc1" value="oui"> Oui</label>
                <label><input type="radio" name="exc1" value="non"> Non</label>
            </div>
            <label>Description * :</label><br>
            <textarea rows="3" placeholder="Résumé en 3 lignes..."></textarea>
        </div>
    </div>

    <button type="button" onclick="addWork()" style="padding:10px; background:#3498db; color:white; border:none; border-radius:5px;">
        + Ajouter une œuvre
    </button>

    <!-- SIGNATURES -->
    <div style="margin-top:60px; padding:30px; background:#fafafa; border:2px dashed #95a5a6;">
        <h3 style="text-align:center;">SIGNATURES</h3><br>
        <p style="text-align:center;">
            Fait à : <input type="text" placeholder="Libreville" style="width:200px;">,
            le : <input type="date">
        </p><br><br>

        <table width="100%">
            <tr>
                <td width="50%" style="text-align:center;">
                    <strong>Pour Oyery</strong><br><br>
                    Nom : <span class="signature-line"></span><br><br>
                    Signature : <span class="signature-line"></span>
                </td>
                <td width="50%" style="text-align:center;">
                    <strong>Pour l'Auteur</strong><br><br>
                    Nom : <span class="signature-line"></span><br><br>
                    Signature : <span class="signature-line"></span>
                </td>
            </tr>
        </table>
    </div>

    <div style="text-align:center; margin:50px 0; font-size:12px; color:#7f8c8d;">
        En cochant "J'accepte", je certifie que mes œuvres sont 100% humaines.
        <br><label><input type="checkbox" id="antiIA"> J'accepte l'examen anti-IA</label>
    </div>
</div>

<!-- BOUTON TÉLÉCHARGEMENT PDF -->
<center>
    <button class="btn-download" onclick="generatePDF()">
        TÉLÉCHARGER MON PDF SIGNÉ
    </button>
    <p>Le PDF rempli se télécharge automatiquement !</p>
</center>

<script>
    // Ajouter une œuvre
    let workCount = 1;
    function addWork() {
        workCount++;
        const container = document.getElementById('works-container');
        const newWork = document.createElement('div');
        newWork.className = 'work-entry';
        newWork.innerHTML = `
            <h4>ŒUVRE N°${workCount}</h4>
            <label>Titre * :</label> <input type="text" placeholder="Titre"><br>
            <label>ISBN :</label> <input type="text"><br>
            <label>Date de création * :</label> <input type="date"><br>
            <label>Format * :</label>
            <div class="checkbox-group">
                <label><input type="checkbox"> PDF</label>
                <label><input type="checkbox"> EPUB</label>
            </div>
            <label>Description * :</label><br>
            <textarea rows="3"></textarea>
        `;
        container.appendChild(newWork);
    }

    // Générer le PDF
    function generatePDF() {
        if (!document.getElementById('antiIA').checked) {
            alert("Veuillez accepter l'examen anti-IA");
            return;
        }
        const element = document.getElementById('contract');
        html2pdf()
            .from(element)
            .set({
                margin: [10, 15, 10, 15],
                filename: 'Protocole-Oyery-' + document.getElementById('authorName').value + '.pdf',
                html2canvas: { scale: 2 },
                jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
            })
            .save();
    }
</script>

</body>
</html>
